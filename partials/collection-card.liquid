{% assign show_product_count = show_product_count | default: true %}
{% assign image_ratio = image_ratio | default: 'aspect-[4/3]' %}
{% assign overlay_opacity = overlay_opacity | default: 'bg-black/30' %}

<article class="group relative overflow-hidden rounded-xl" data-collection-handle="{{ collection.handle }}">
  <a href="{{ collection.url }}" class="block">
    <div class="relative {{ image_ratio }} overflow-hidden">
      {% if collection.image %}
        <img
          src="{{ collection.image.src }}"
          alt="{{ collection.image.alt | escape | default: collection.title }}"
          class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
          loading="lazy"
        >
      {% elsif collection.products.first.featured_image %}
        <img
          src="{{ collection.products.first.featured_image.src }}"
          alt="{{ collection.title }}"
          class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
          loading="lazy"
        >
      {% else %}
        <div class="w-full h-full bg-muted flex items-center justify-center">
          <i class="ri-folder-image-line text-5xl text-muted-foreground"></i>
        </div>
      {% endif %}

      <div class="absolute inset-0 {{ overlay_opacity }} transition-colors duration-300 group-hover:bg-black/40"></div>

      <div class="absolute inset-0 flex flex-col items-center justify-center text-white p-4">
        <h3 class="text-xl md:text-2xl font-heading font-semibold text-center">
          {{ collection.title }}
        </h3>

        {% if show_product_count %}
          <p class="text-sm mt-2 opacity-80">
            {{ collection.products_count }} {{ collection.products_count | pluralize: 'product', 'products' }}
          </p>
        {% endif %}

        <span class="mt-4 inline-flex items-center gap-2 bg-white text-black px-4 py-2 rounded-lg text-sm font-medium opacity-0 translate-y-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0">
          Shop Now
          <i class="ri-arrow-right-line"></i>
        </span>
      </div>
    </div>
  </a>
</article>
